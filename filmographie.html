<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Filmographie — Yingying HOU</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Filmographie complète de Yingying HOU : longs métrages, courts, séries TV, théâtre et voix." />
  <link rel="canonical" href="https://www.example.com/filmographie.html" />
  <meta property="og:title" content="Filmographie — Yingying HOU" />
  <meta property="og:description" content="Sélection d'œuvres, rôles, années, réalisateurs et formats." />
  <meta property="og:type" content="profile" />
  <meta property="og:image" content="https://www.example.com/img/og.jpg" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <script>if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark-mode');</script>
  <a class="skip" href="#main">Aller au contenu</a>
  
  <header class="site-header" role="banner">
    <div class="wrap" style="display: flex; justify-content: space-between; align-items: center;">
      <a class="brand" href="/">Yingying <strong>HOU</strong></a>
      
      <nav id="nav" class="site-nav" role="navigation" aria-label="Navigation principale">
        <ul>
          <li><a href="/">Accueil</a></li>
          <li><a href="filmographie.html">Filmographie</a></li>
          <li><a href="galerie.html">Galerie</a></li>
          <li><a href="contact.html">Contact / Booking</a></li>
        </ul>
      </nav>

      <div class="header-right">
        <button id="theme-toggle-btn" class="theme-toggle-modern" aria-label="Changer le thème">
          </button>
        <button class="nav-toggle" aria-expanded="false" aria-controls="nav">Menu</button>
      </div>
    </div>
  </header>

  <main id="main">
    <section class="page-hero">
      <div class="wrap">
        <h1>Filmographie</h1>
        <p class="kicker">Longs métrages, courts, séries, voix & théâtre.</p>
      </div>
    </section>

    <section class="wrap pad">
      <div class="filters" style="margin-bottom: 20px; display: flex; gap: 20px; flex-wrap: wrap;">
        <label>Catégorie
          <select id="filter-category" autocomplete="off">
            <option value="all" selected>Toutes</option>
            <option value="Long métrage">Long métrage</option>
            <option value="Court métrage">Court métrage</option>
            <option value="Série TV">Série TV</option>
            <option value="Réalisation">Réalisation</option>
            <option value="Pub">Pub</option>
            <option value="Théâtre">Théâtre</option>
            <option value="Voix">Voix</option>
          </select>
        </label>
        
        <label>Trier par
          <select id="sort-by" autocomplete="off">
            <option value="year-desc" selected>Année ↓</option>
            <option value="year-asc">Année ↑</option>
            <option value="title-asc">Titre A→Z</option>
            <option value="title-desc">Titre Z→A</option>
          </select>
        </label>
      </div>

      <div class="table-wrap">
        <table class="table" id="filmography">
          <thead>
            <tr>
              <th>Année</th>
              <th>Projet / Titre</th>
              <th>Rôle</th>
              <th>Réalisateur</th>
              <th>Catégorie</th>
              <th>Lien</th>
            </tr>
          </thead>
          <tbody>
            </tbody>
        </table>
      </div>

      <script type="module">
    // ... (garder ton import et config firebase identiques) ...

    async function chargerFilmographie() {
      try {
        const querySnapshot = await getDocs(collection(db, "role"));
        let roles = [];
        querySnapshot.forEach((doc) => roles.push(doc.data()));
        const tbody = document.querySelector('#filmography tbody');
        
        // Nettoyage des filtres pour éviter les doublons
        const nouveauFiltre = document.getElementById('filter-category');
        const nouveauTri = document.getElementById('sort-by');

        function afficherTableau() {
          tbody.innerHTML = '';
          const categorieChoisie = nouveauFiltre.value;
          const triChoisi = nouveauTri.value;

          let rolesFiltres = roles;
          if (categorieChoisie !== 'all') {
            rolesFiltres = roles.filter(role => role.type === categorieChoisie);
          }

          rolesFiltres.sort((a, b) => {
            if (triChoisi === 'year-desc') return (b.annee || 0) - (a.annee || 0);
            if (triChoisi === 'year-asc') return (a.annee || 0) - (b.annee || 0);
            return 0;
          });

          rolesFiltres.forEach(role => {
            const tr = document.createElement('tr');
            // ICI : On ajoute les data-label pour que le mobile fonctionne !
            tr.innerHTML = `
              <td data-label="Année">${role.annee || ''}</td>
              <td data-label="Titre">${role.projet || ''}</td>
              <td data-label="Rôle">${role.titre || ''}</td>
              <td data-label="Réalisateur">${role.realisateur || '-'}</td>
              <td data-label="Catégorie">${role.type || ''}</td>
              <td data-label="Lien"><a class="link" href="${role.lien || '#'}" target="_blank">Voir</a></td>
            `;
            tbody.appendChild(tr);
          });
        }

        nouveauFiltre.addEventListener('change', afficherTableau);
        nouveauTri.addEventListener('change', afficherTableau);
        afficherTableau();
      } catch (erreur) { console.error(erreur); }
    }
    chargerFilmographie();
  </script>
  <script src="js/main.js" defer></script>
</body>
</html>
